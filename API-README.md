# API ุงูุจูุช ุงูุณูุฏุงูู ๐ธ๐ฉ

API ุดุงูู ูุฎุฏู ููุตุฉ ุงูุจูุช ุงูุณูุฏุงูู ููููุจ ูุงูุชุทุจูู ุงูุฌูุงูุ ูููุฑ ุฎุฏูุงุช ูุชูุงููุฉ ููุดุฑูุงุชุ ุงูููุชุฌุงุชุ ุงููุธุงุฆูุ ูุงูุฎุฏูุงุช ุงูุณูุฏุงููุฉ.

## ๐ ุฌุฏูู ุงููุญุชููุงุช

- [ุงูุจุฏุก ุงูุณุฑูุน](#ุงูุจุฏุก-ุงูุณุฑูุน)
- [ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ](#ุงูุชุซุจูุช-ูุงูุฅุนุฏุงุฏ)
- [ุงููุตุงุฏูุฉ](#ุงููุตุงุฏูุฉ)
- [ุงููุณุงุฑุงุช ุงููุชููุฑุฉ](#ุงููุณุงุฑุงุช-ุงููุชููุฑุฉ)
- [ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู](#ุฃูุซูุฉ-ุงูุงุณุชุฎุฏุงู)
- [ุฑุจุท ุงูุชุทุจูู ุงูุฌูุงู](#ุฑุจุท-ุงูุชุทุจูู-ุงูุฌูุงู)
- [ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก](#ูุนุงูุฌุฉ-ุงูุฃุฎุทุงุก)
- [ูุดุฑ API](#ูุดุฑ-api)

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

- Node.js 18+
- npm ุฃู yarn
- ูุงุนุฏุฉ ุจูุงูุงุช (MongoDB ุฃู PostgreSQL) - ุงุฎุชูุงุฑู ูููุฑุญูุฉ ุงูุญุงููุฉ

### ุชุดุบูู ุณุฑูุน

```bash
# ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone https://github.com/your-repo/bayt-al-sudani.git
cd bayt-al-sudani

# ุชุซุจูุช ุงูุญุฒู
npm install

# ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
cp .env.example .env

# ุชุดุบูู ุงูุฎุงุฏู
npm run dev:api
```

ุงูู API ุณูุนูู ุนูู: `http://localhost:3001`

## โ๏ธ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ

```bash
# ููุชุจุงุช ุงูุฎุงุฏู ุงูุฃุณุงุณูุฉ
npm install express cors dotenv

# ููุชุจุงุช ุงููุตุงุฏูุฉ ูุงูุฃูุงู
npm install jsonwebtoken bcrypt helmet

# ููุชุจุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงุฎุชูุงุฑู)
npm install mongoose # ููู MongoDB
# ุฃู
npm install pg sequelize # ููู PostgreSQL

# ููุชุจุงุช ุงูุชุทููุฑ
npm install -D nodemon ts-node typescript @types/node @types/express
```

### 2. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ุฃูุดุฆ ููู `.env` ูู ุงููุฌูุฏ ุงูุฌุฐุฑ:

```env
# ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู
PORT=3001
NODE_ENV=development

# ุฅุนุฏุงุฏุงุช ุงููุตุงุฏูุฉ
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRES_IN=7d
JWT_MOBILE_EXPIRES_IN=30d

# ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงุฎุชูุงุฑู)
DATABASE_URL=mongodb://localhost:27017/bayt-sudani
# ุฃู
DATABASE_URL=postgresql://username:password@localhost:5432/bayt_sudani

# ุฅุนุฏุงุฏุงุช CORS
WEB_URL=http://localhost:5173
MOBILE_SCHEME=sudanapp://

# ุฅุนุฏุงุฏุงุช ุงููููุงุช
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10MB

# ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช (ุงุฎุชูุงุฑู)
FCM_SERVER_KEY=your-fcm-server-key
APPLE_PUSH_KEY=your-apple-push-key
```

### 3. ุจููุฉ ุงููุดุฑูุน

```
server/
โโโ api/
โ   โโโ index.ts              # ููุทุฉ ุฏุฎูู ุงูู API
โ   โโโ middleware/           # Middleware ูุฎุตุต
โ   โ   โโโ auth.ts          # ูุตุงุฏูุฉ JWT
โ   โ   โโโ cors.ts          # ุฅุนุฏุงุฏุงุช CORS
โ   โ   โโโ validation.ts    # ุงูุชุญูู ูู ุงูุจูุงูุงุช
โ   โโโ routes/              # ูุณุงุฑุงุช ุงูู API
โ       โโโ auth.ts          # ูุตุงุฏูุฉ ุงููุณุชุฎุฏููู
โ       โโโ companies.ts     # ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช
โ       โโโ products.ts      # ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
โ       โโโ jobs.ts          # ุฅุฏุงุฑุฉ ุงููุธุงุฆู
โ       โโโ stores.ts        # ุฅุฏุงุฑุฉ ุงููุชุงุฌุฑ
โ       โโโ services.ts      # ุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช
โ       โโโ users.ts         # ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
โ       โโโ mobile.ts        # ุฎุฏูุงุช ุฎุงุตุฉ ุจุงูุฌูุงู
โ       โโโ upload.ts        # ุฑูุน ุงููููุงุช
โโโ models/                  # ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ utils/                   # ุฃุฏูุงุช ูุณุงุนุฏุฉ
โโโ package.json
```

### 4. ุฅุนุฏุงุฏ Scripts ูู package.json

```json
{
  "scripts": {
    "dev:api": "nodemon server/api/index.ts",
    "build:api": "tsc -p server/tsconfig.json",
    "start:api": "node dist/server/api/index.js",
    "test:api": "jest server/",
    "deploy:api": "npm run build:api && pm2 start dist/server/api/index.js"
  }
}
```

## ๐ ุงููุตุงุฏูุฉ

ุงูู API ูุณุชุฎุฏู JWT (JSON Web Tokens) ูููุตุงุฏูุฉ.

### ุชุณุฌูู ุงูุฏุฎูู

```bash
POST /api/auth/login
Content-Type: application/json
X-Platform: web # ุฃู mobile

{
  "username": "admin",
  "password": "admin",
  "platform": "web"
}
```

**ุงูุงุณุชุฌุงุจุฉ:**

```json
{
  "user": {
    "id": "admin-001",
    "username": "admin",
    "email": "admin@baytsudani.com",
    "role": "super_admin",
    "profile": {
      "name": "ูุฏูุฑ ุงูุชุทุจูู",
      "language": "ar"
    }
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "platform": "web",
  "expiresIn": "7d"
}
```

### ุงุณุชุฎุฏุงู ุงูุฑูุฒ ุงููููุฒ

```bash
# ุฃุถู ุงูุฑูุฒ ูู header ูุฌููุน ุงูุทูุจุงุช ุงููุญููุฉ
Authorization: Bearer your-jwt-token-here
X-Platform: web # ุฃู mobile
```

### ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ

```bash
POST /api/auth/register
Content-Type: application/json

{
  "fullName": "ุฃุญูุฏ ูุญูุฏ",
  "email": "ahmed@example.com",
  "phone": "+966501234567",
  "password": "password123",
  "accountType": "customer", # ุฃู "merchant"
  "platform": "web"
}
```

## ๐ฃ๏ธ ุงููุณุงุฑุงุช ุงููุชููุฑุฉ

### ุงููุตุงุฏูุฉ (`/api/auth`)

| ุงูุทุฑููุฉ | ุงููุณุงุฑ      | ุงููุตู                  |
| ------- | ----------- | ---------------------- |
| `POST`  | `/login`    | ุชุณุฌูู ุงูุฏุฎูู           |
| `POST`  | `/register` | ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ      |
| `GET`   | `/me`       | ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู |
| `POST`  | `/refresh`  | ุชุญุฏูุซ ุงูุฑูุฒ ุงููููุฒ     |
| `POST`  | `/logout`   | ุชุณุฌูู ุงูุฎุฑูุฌ           |

### ุงูุดุฑูุงุช (`/api/companies`)

| ุงูุทุฑููุฉ  | ุงููุณุงุฑ | ุงููุตู              |
| -------- | ------ | ------------------ |
| `GET`    | `/`    | ูุงุฆูุฉ ุงูุดุฑูุงุช      |
| `GET`    | `/:id` | ุชูุงุตูู ุดุฑูุฉ        |
| `POST`   | `/`    | ุฅุถุงูุฉ ุดุฑูุฉ ุฌุฏูุฏุฉ\* |
| `PUT`    | `/:id` | ุชุญุฏูุซ ุดุฑูุฉ\*       |
| `DELETE` | `/:id` | ุญุฐู ุดุฑูุฉ\*         |

### ุงูููุชุฌุงุช (`/api/products`)

| ุงูุทุฑููุฉ  | ุงููุณุงุฑ | ุงููุตู             |
| -------- | ------ | ----------------- |
| `GET`    | `/`    | ูุงุฆูุฉ ุงูููุชุฌุงุช    |
| `GET`    | `/:id` | ุชูุงุตูู ููุชุฌ       |
| `POST`   | `/`    | ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ\* |
| `PUT`    | `/:id` | ุชุญุฏูุซ ููุชุฌ\*      |
| `DELETE` | `/:id` | ุญุฐู ููุชุฌ\*        |

### ุงููุธุงุฆู (`/api/jobs`)

| ุงูุทุฑููุฉ  | ุงููุณุงุฑ | ุงููุตู               |
| -------- | ------ | ------------------- |
| `GET`    | `/`    | ูุงุฆูุฉ ุงููุธุงุฆู       |
| `GET`    | `/:id` | ุชูุงุตูู ูุธููุฉ        |
| `POST`   | `/`    | ุฅุถุงูุฉ ูุธููุฉ ุฌุฏูุฏุฉ\* |
| `PUT`    | `/:id` | ุชุญุฏูุซ ูุธููุฉ\*       |
| `DELETE` | `/:id` | ุญุฐู ูุธููุฉ\*         |

### ุงููุชุงุฌุฑ (`/api/stores`)

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู             |
| ------- | ------ | ----------------- |
| `GET`   | `/`    | ูุงุฆูุฉ ุงููุชุงุฌุฑ     |
| `GET`   | `/:id` | ุชูุงุตูู ูุชุฌุฑ       |
| `POST`  | `/`    | ุฅุถุงูุฉ ูุชุฌุฑ ุฌุฏูุฏ\* |
| `PUT`   | `/:id` | ุชุญุฏูุซ ูุชุฌุฑ\*      |

### ุงูุฎุฏูุงุช (`/api/services`)

| ุงูุทุฑููุฉ | ุงููุณุงุฑ | ุงููุตู              |
| ------- | ------ | ------------------ |
| `GET`   | `/`    | ูุงุฆูุฉ ุงูุฎุฏูุงุช      |
| `GET`   | `/:id` | ุชูุงุตูู ุฎุฏูุฉ        |
| `POST`  | `/`    | ุฅุถุงูุฉ ุฎุฏูุฉ ุฌุฏูุฏุฉ\* |

### ุฎุฏูุงุช ุงูุฌูุงู (`/api/mobile`)

| ุงูุทุฑููุฉ | ุงููุณุงุฑ            | ุงููุตู           |
| ------- | ----------------- | --------------- |
| `GET`   | `/config`         | ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู |
| `POST`  | `/sync`           | ูุฒุงููุฉ ุงูุจูุงูุงุช |
| `POST`  | `/register-token` | ุชุณุฌูู ุฑูุฒ FCM   |

**ููุงุญุธุฉ:** \* ุชุชุทูุจ ูุตุงุฏูุฉ ูุตูุงุญูุงุช

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู ุดุงูู - JavaScript/TypeScript

```typescript
// ุฅุนุฏุงุฏ ุฎุฏูุฉ API
class BaytSudaniAPI {
  private baseURL = "http://localhost:3001/api";
  private token: string | null = null;

  // ุชุนููู ุงูุฑูุฒ ุงููููุฒ
  setToken(token: string) {
    this.token = token;
  }

  // ุทูุจ ุนุงู
  private async request(endpoint: string, options: RequestInit = {}) {
    const url = `${this.baseURL}${endpoint}`;
    const headers: HeadersInit = {
      "Content-Type": "application/json",
      "X-Platform": "web",
      ...options.headers,
    };

    if (this.token) {
      headers["Authorization"] = `Bearer ${this.token}`;
    }

    const response = await fetch(url, {
      ...options,
      headers,
    });

    if (!response.ok) {
      throw new Error(`HTTP ${response.status}`);
    }

    return response.json();
  }

  // ุชุณุฌูู ุงูุฏุฎูู
  async login(username: string, password: string) {
    const response = await this.request("/auth/login", {
      method: "POST",
      body: JSON.stringify({ username, password, platform: "web" }),
    });

    this.setToken(response.token);
    return response;
  }

  // ุงูุญุตูู ุนูู ุงูุดุฑูุงุช
  async getCompanies(filters?: any) {
    const params = new URLSearchParams(filters);
    return this.request(`/companies?${params}`);
  }

  // ุงูุญุตูู ุนูู ุงูููุชุฌุงุช
  async getProducts(filters?: any) {
    const params = new URLSearchParams(filters);
    return this.request(`/products?${params}`);
  }

  // ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
  async createProduct(productData: any) {
    return this.request("/products", {
      method: "POST",
      body: JSON.stringify(productData),
    });
  }
}

// ุงูุงุณุชุฎุฏุงู
const api = new BaytSudaniAPI();

// ุชุณุฌูู ุงูุฏุฎูู
await api.login("admin", "admin");

// ุงูุญุตูู ุนูู ุงูุดุฑูุงุช
const companies = await api.getCompanies({
  industry: "ุชูููุฉ ุงููุนูููุงุช",
  country: "ุงูุณุนูุฏูุฉ",
});

console.log("ุงูุดุฑูุงุช:", companies);
```

### ูุซุงู React Hook

```typescript
// Hook ููุงุณุชุฎุฏุงู ูู React
import { useState, useEffect } from 'react';

export const useAPI = () => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const callAPI = async (apiCall: () => Promise<any>) => {
    try {
      setLoading(true);
      setError(null);
      const result = await apiCall();
      return result;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'ุฎุทุฃ ุบูุฑ ูุนุฑูู');
      return null;
    } finally {
      setLoading(false);
    }
  };

  return { loading, error, callAPI };
};

// ุงุณุชุฎุฏุงู ุงูู Hook ูู ูููู
export const CompaniesPage = () => {
  const [companies, setCompanies] = useState([]);
  const { loading, error, callAPI } = useAPI();

  useEffect(() => {
    const loadCompanies = async () => {
      const result = await callAPI(() =>
        fetch('/api/companies').then(res => res.json())
      );
      if (result) {
        setCompanies(result);
      }
    };

    loadCompanies();
  }, []);

  if (loading) return <div>ุฌุงุฑู ุงูุชุญููู...</div>;
  if (error) return <div>ุฎุทุฃ: {error}</div>;

  return (
    <div>
      {companies.map(company => (
        <div key={company.id}>{company.name}</div>
      ))}
    </div>
  );
};
```

### ูุซุงู cURL

```bash
# ุชุณุฌูู ุงูุฏุฎูู
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -H "X-Platform: web" \
  -d '{
    "username": "admin",
    "password": "admin",
    "platform": "web"
  }'

# ุงูุญุตูู ุนูู ุงูุดุฑูุงุช (ูุน ุงูุฑูุฒ ุงููููุฒ)
curl -X GET "http://localhost:3001/api/companies?industry=ุชูููุฉ ุงููุนูููุงุช" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "X-Platform: web"

# ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
curl -X POST http://localhost:3001/api/products \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "X-Platform: web" \
  -d '{
    "name": "ููุชุฌ ุฌุฏูุฏ",
    "description": "ูุตู ุงูููุชุฌ",
    "price": 100,
    "storeId": "store-001",
    "category": "ุฅููุชุฑูููุงุช"
  }'
```

## ๐ฑ ุฑุจุท ุงูุชุทุจูู ุงูุฌูุงู

### ุฅุนุฏุงุฏ React Native

```typescript
// services/ApiService.ts
import AsyncStorage from "@react-native-async-storage/async-storage";

export class MobileApiService {
  private static baseURL = "http://your-api-domain.com/api";

  // ุญูุธ ุงูุฑูุฒ ูุญููุงู
  static async setToken(token: string) {
    await AsyncStorage.setItem("auth_token", token);
  }

  // ุงุณุชุฑุฌุงุน ุงูุฑูุฒ
  static async getToken(): Promise<string | null> {
    return await AsyncStorage.getItem("auth_token");
  }

  // ุทูุจ ูุน ุงููุตุงุฏูุฉ
  static async authenticatedRequest(endpoint: string, options: any = {}) {
    const token = await this.getToken();

    return fetch(`${this.baseURL}${endpoint}`, {
      ...options,
      headers: {
        "Content-Type": "application/json",
        "X-Platform": "mobile",
        Authorization: token ? `Bearer ${token}` : "",
        ...options.headers,
      },
    });
  }

  // ุชุณุฌูู ุงูุฏุฎูู ููุฌูุงู
  static async login(credentials: any) {
    const response = await fetch(`${this.baseURL}/auth/login`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "X-Platform": "mobile",
      },
      body: JSON.stringify({
        ...credentials,
        platform: "mobile",
      }),
    });

    const data = await response.json();

    if (data.token) {
      await this.setToken(data.token);
    }

    return data;
  }
}
```

### ูุฒุงููุฉ ุงูุจูุงูุงุช ููุฌูุงู

```typescript
// services/SyncService.ts
export class SyncService {
  static async syncAllData() {
    try {
      // ุฌูุจ ุฌููุน ุงูุจูุงูุงุช
      const [companies, products, jobs] = await Promise.all([
        MobileApiService.authenticatedRequest("/companies"),
        MobileApiService.authenticatedRequest("/products"),
        MobileApiService.authenticatedRequest("/jobs"),
      ]);

      // ุญูุธ ุงูุจูุงูุงุช ูุญููุงู
      await AsyncStorage.setItem("companies", JSON.stringify(companies));
      await AsyncStorage.setItem("products", JSON.stringify(products));
      await AsyncStorage.setItem("jobs", JSON.stringify(jobs));
      await AsyncStorage.setItem("last_sync", new Date().toISOString());

      return true;
    } catch (error) {
      console.error("Sync failed:", error);
      return false;
    }
  }

  // ุชุญููู ุงูุจูุงูุงุช ุงููุญููุธุฉ ูุญููุงู
  static async loadCachedData() {
    const [companies, products, jobs] = await Promise.all([
      AsyncStorage.getItem("companies"),
      AsyncStorage.getItem("products"),
      AsyncStorage.getItem("jobs"),
    ]);

    return {
      companies: companies ? JSON.parse(companies) : [],
      products: products ? JSON.parse(products) : [],
      jobs: jobs ? JSON.parse(jobs) : [],
    };
  }
}
```

## โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุฃููุงุฏ ุงูุฃุฎุทุงุก ุงููุนูุงุฑูุฉ

| ุงูููุฏ | ุงููุนูู           | ุงููุตู                     |
| ----- | ---------------- | ------------------------- |
| `200` | ูุฌุญ              | ุชู ุชูููุฐ ุงูุทูุจ ุจูุฌุงุญ      |
| `201` | ุชู ุฅูุดุงุคู        | ุชู ุฅูุดุงุก ุงูููุฑุฏ ุจูุฌุงุญ     |
| `400` | ุทูุจ ุฎุงุทุฆ         | ุจูุงูุงุช ุงูุทูุจ ุบูุฑ ุตุญูุญุฉ    |
| `401` | ุบูุฑ ูุตุฑุญ         | ูุทููุจ ุชุณุฌูู ุฏุฎูู          |
| `403` | ูุญุธูุฑ            | ูุง ุชูุฌุฏ ุตูุงุญูุฉ ูุงููุฉ      |
| `404` | ุบูุฑ ููุฌูุฏ        | ุงูููุฑุฏ ุบูุฑ ููุฌูุฏ          |
| `422` | ุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ | ูุดู ูู ุงูุชุญูู ูู ุงูุจูุงูุงุช |
| `500` | ุฎุทุฃ ุฎุงุฏู         | ุฎุทุฃ ุฏุงุฎูู ูู ุงูุฎุงุฏู       |

### ุชูุณูู ุงูุฃุฎุทุงุก

```json
{
  "error": "ุงูุฑุณุงูุฉ ุงูุฃุณุงุณูุฉ",
  "message": "ุชูุงุตูู ุฅุถุงููุฉ ุนู ุงูุฎุทุฃ",
  "code": "ERROR_CODE",
  "details": {
    "field": "ุงุณู ุงูุญูู ุงูุฐู ููู ุฎุทุฃ",
    "value": "ุงููููุฉ ุงูุฎุงุทุฆุฉ"
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุงูููุฏ

```typescript
// ูุนุงูุฌ ุฃุฎุทุงุก ุดุงูู
const handleAPIError = (error: any) => {
  if (error.status === 401) {
    // ุฅุนุงุฏุฉ ุชูุฌูู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
    window.location.href = "/login";
  } else if (error.status === 403) {
    // ุนุฑุถ ุฑุณุงูุฉ ุนุฏู ุงูุตูุงุญูุฉ
    alert("ููุณ ูุฏูู ุตูุงุญูุฉ ูููุตูู ุฅูู ูุฐุง ุงูููุฑุฏ");
  } else if (error.status >= 500) {
    // ุฎุทุฃ ุฎุงุฏู
    alert("ุญุฏุซ ุฎุทุฃ ูู ุงูุฎุงุฏูุ ูุฑุฌู ุงููุญุงููุฉ ูุงุญูุงู");
  } else {
    // ุฃุฎุทุงุก ุฃุฎุฑู
    alert(error.message || "ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน");
  }
};
```

## ๐ ูุดุฑ API

### ูุดุฑ ุนูู Vercel

```bash
# ุชุซุจูุช Vercel CLI
npm install -g vercel

# ุชุณุฌูู ุงูุฏุฎูู
vercel login

# ูุดุฑ ุงููุดุฑูุน
vercel

# ุชุญุฏูุฏ ุงููุชุบูุฑุงุช
vercel env add JWT_SECRET
vercel env add DATABASE_URL
```

### ุฅุนุฏุงุฏ `vercel.json`

```json
{
  "version": 2,
  "builds": [
    {
      "src": "server/api/index.ts",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "server/api/index.ts"
    }
  ],
  "env": {
    "NODE_ENV": "production"
  }
}
```

### ูุดุฑ ุนูู Railway

```bash
# ุชุซุจูุช Railway CLI
npm install -g @railway/cli

# ุชุณุฌูู ุงูุฏุฎูู
railway login

# ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ
railway init

# ูุดุฑ
railway up
```

### ูุดุฑ ุนูู Heroku

```bash
# ุชุซุจูุช Heroku CLI
npm install -g heroku

# ุชุณุฌูู ุงูุฏุฎูู
heroku login

# ุฅูุดุงุก ุชุทุจูู
heroku create bayt-sudani-api

# ุฅุถุงูุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
heroku config:set JWT_SECRET=your-secret
heroku config:set NODE_ENV=production

# ูุดุฑ
git push heroku main
```

### ูุดุฑ ุนูู ุฎุงุฏู ุดุฎุตู (VPS)

```bash
# ุชุซุจูุช PM2
npm install -g pm2

# ุจูุงุก ุงููุดุฑูุน
npm run build:api

# ุชุดุบูู ุจู PM2
pm2 start dist/server/api/index.js --name "bayt-sudani-api"

# ุญูุธ ุฅุนุฏุงุฏุงุช PM2
pm2 save
pm2 startup
```

### ุฅุนุฏุงุฏ Nginx (ููุฎุงุฏู ุงูุดุฎุตู)

```nginx
server {
    listen 80;
    server_name api.baytsudani.com;

    location / {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

## ๐ ุงุฎุชุจุงุฑ API

### ุชุซุจูุช ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ

```bash
npm install -D jest supertest @types/jest @types/supertest
```

### ูุซุงู ุงุฎุชุจุงุฑ

```typescript
// tests/auth.test.ts
import request from "supertest";
import app from "../server/api/index";

describe("Auth API", () => {
  test("ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ", async () => {
    const response = await request(app).post("/api/auth/login").send({
      username: "admin",
      password: "admin",
      platform: "web",
    });

    expect(response.status).toBe(200);
    expect(response.body).toHaveProperty("token");
    expect(response.body.user.username).toBe("admin");
  });

  test("ูุดู ุชุณุฌูู ุงูุฏุฎูู - ูููุฉ ูุฑูุฑ ุฎุงุทุฆุฉ", async () => {
    const response = await request(app).post("/api/auth/login").send({
      username: "admin",
      password: "wrong-password",
      platform: "web",
    });

    expect(response.status).toBe(401);
    expect(response.body).toHaveProperty("error");
  });
});
```

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช

```bash
npm test
```

## ๐ค ุงููุณุงููุฉ

1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก ูุฑุน ููููุฒุฉ ุงูุฌุฏูุฏุฉ (`git checkout -b feature/amazing-feature`)
3. Commit ุงูุชุบููุฑุงุช (`git commit -m 'Add amazing feature'`)
4. Push ูููุฑุน (`git push origin feature/amazing-feature`)
5. ูุชุญ Pull Request

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช ุฑุฎุตุฉ MIT - ุงูุธุฑ ููู [LICENSE](LICENSE) ููุชูุงุตูู.

## ๐ ุงูุฏุนู

ููุญุตูู ุนูู ุงููุณุงุนุฏุฉ:

- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: api-support@baytsudani.com
- GitHub Issues: [ูุชุญ issue ุฌุฏูุฏ](https://github.com/your-repo/issues)
- ุงูุชูุซูู: [docs.baytsudani.com](https://docs.baytsudani.com)

---

**ุชู ุฅูุดุงุคู ุจู โค๏ธ ูููุฌุชูุน ุงูุณูุฏุงูู**
