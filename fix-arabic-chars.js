const fs = require('fs');
const path = require('path');

// Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…Ø¹Ø·ÙˆØ¨Ø©
const corrections = {
  'ï¿½ï¿½': '',
  'Ã¯Â»Â¿': '',
  // Ø¥ØµÙ„Ø§Ø­Ø§Øª Ù…Ø­Ø¯Ø¯Ø© Ù„Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
  'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ': 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ',
  'Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ©': 'Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ©',
  'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ': 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ',
  'Ù…ØªØ§Ø¬Ø± Ù†Ø´Ø·Ø©': 'Ù…ØªØ§Ø¬Ø± Ù†Ø´Ø·Ø©',
  'ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø´Ø±ÙƒØ§Øª': 'ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø´Ø±ÙƒØ§Øª',
  'Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©': 'Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©',
  'ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†': 'ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†',
  'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø¹ØªÙ…Ø§Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØ¬Ø±ØŸ': 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø¹ØªÙ…Ø§Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØ¬Ø±ØŸ',
  'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙŠØ¬ ÙˆØ§Ù„Ø¹Ø§Ù„Ù…': 'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙŠØ¬ ÙˆØ§Ù„Ø¹Ø§Ù„Ù…',
  'Ø²Ø¨Ø¯Ø© Ø§Ù„Ø´ÙŠØ§ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠØ©': 'Ø²Ø¨Ø¯Ø© Ø§Ù„Ø´ÙŠØ§ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠØ©',
  'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬': 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬',
  'ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ§Ø¬Ø± Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨': 'ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ§Ø¬Ø± Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨',
  'Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±': 'Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±',
  'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯': 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯',
  'Ù„Ù„ØªØ¬Ø§Ø± Ø§Ù„Ø¬Ø¯Ø¯': 'Ù„Ù„ØªØ¬Ø§Ø± Ø§Ù„Ø¬Ø¯Ø¯',
  'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØ±Ø© ØµØ§Ù„Ø­': 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØ±Ø© ØµØ§Ù„Ø­',
  'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù': 'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù',
  'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ': 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ',
  'Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©': 'Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©',
  'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†': 'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†',
  'Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ù‚Ù„': 'Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ù‚Ù„',
  'Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø¢Ù„Ø§Ù Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠÙŠÙ†': 'Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø¢Ù„Ø§Ù Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠÙŠÙ†',
  'Ø·Ø¨Ø® Ù…Ù†Ø²Ù„ÙŠ': 'Ø·Ø¨Ø® Ù…Ù†Ø²Ù„ÙŠ',
  'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
  'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©': 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©',
  'Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©': 'Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©',
  'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø´Ø§Ù…Ù„Ø© Ø¹Ù† Ø§Ù„Ù…ØªØ¬Ø±': 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø´Ø§Ù…Ù„Ø© Ø¹Ù† Ø§Ù„Ù…ØªØ¬Ø±',
  'Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù†Ø´Ø·Ø©': 'Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù†Ø´Ø·Ø©',
  'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ': 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ',
  'Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©': 'Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©',
  'Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…': 'Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…',
  'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠØ©': 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠØ©',
  'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ': 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
  'Ø£Ø²ÙŠØ§Ø¡ ÙˆÙ…Ù„Ø§Ø¨Ø³': 'Ø£Ø²ÙŠØ§Ø¡ ÙˆÙ…Ù„Ø§Ø¨Ø³',
  'Ù…Ù…ÙŠØ²': 'Ù…Ù…ÙŠØ²',
  'Ø¥Ù„ØºØ§Ø¡': 'Ø¥Ù„ØºØ§Ø¡',
  'Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª': 'Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
  'Ù‡Ù†Ø§ ÙŠÙƒÙˆÙ† QR Code': 'Ù‡Ù†Ø§ ÙŠÙƒÙˆÙ† QR Code',
  'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ': 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ',
  'Â© 2024 Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ': 'Â© 2024 Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠ'
};

// Ø¯Ø§Ù„Ø© Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù†Øµ
function fixArabicText(content) {
  let fixed = content;
  
  // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…Ø¹Ø·ÙˆØ¨Ø©
  fixed = fixed.replace(/ï¿½ï¿½/g, '');
  fixed = fixed.replace(/Ã¯Â»Â¿/g, '');
  
  // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
  Object.entries(corrections).forEach(([broken, correct]) => {
    if (broken !== correct) {
      const regex = new RegExp(broken.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
      fixed = fixed.replace(regex, correct);
    }
  });
  
  return fixed;
}

// Ø¯Ø§Ù„Ø© Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù„Ù ÙˆØ§Ø­Ø¯
function processFile(filePath) {
  try {
    const content = fs.readFileSync(filePath, 'utf8');
    const fixed = fixArabicText(content);
    
    if (content !== fixed) {
      fs.writeFileSync(filePath, fixed, 'utf8');
      console.log(`âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­: ${filePath}`);
      return true;
    }
    return false;
  } catch (error) {
    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© ${filePath}:`, error.message);
    return false;
  }
}

// Ø¯Ø§Ù„Ø© Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø¬Ù„Ø¯
function processDirectory(dirPath) {
  const items = fs.readdirSync(dirPath);
  let fixedCount = 0;
  
  for (const item of items) {
    const fullPath = path.join(dirPath, item);
    const stat = fs.statSync(fullPath);
    
    if (stat.isDirectory() && !item.startsWith('.') && item !== 'node_modules') {
      fixedCount += processDirectory(fullPath);
    } else if (stat.isFile() && (item.endsWith('.tsx') || item.endsWith('.ts') || item.endsWith('.js'))) {
      if (processFile(fullPath)) {
        fixedCount++;
      }
    }
  }
  
  return fixedCount;
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¥ØµÙ„Ø§Ø­
console.log('ğŸš€ Ø¨Ø¯Ø¡ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…Ø¹Ø·ÙˆØ¨Ø©...');
const fixedFiles = processDirectory('./client');
console.log(`âœ¨ ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡! ØªÙ… Ø¥ØµÙ„Ø§Ø­ ${fixedFiles} Ù…Ù„Ù.`);
